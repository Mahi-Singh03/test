/* ════════════════════════════════════════
   QUIZ ENGINE — Exam Center UI
   ════════════════════════════════════════ */

/* ─── Shell ─── */
.shell {
    display: flex;
    flex-direction: column;
    height: 100dvh;
    background: var(--bg);
    color: var(--text-1);
    font-family: 'Inter', system-ui, sans-serif;
    overflow: hidden;
}

/* ─── Top Bar ─── */
.topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.625rem 1.25rem;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
    gap: 0.75rem;
    flex-shrink: 0;
    z-index: 10;
}

.topbarLeft {
    display: flex;
    flex-direction: column;
    min-width: 0;
    flex: 1;
}

.examTitle {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--text-1);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.examSub {
    font-size: 0.7rem;
    color: var(--text-2);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.topbarCenter {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.topbarRight {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    flex-shrink: 0;
}

/* ─── Global Timer ─── */
.timerBox {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    background: var(--accent-soft);
    border: 1.5px solid var(--accent);
    border-radius: 10px;
    padding: 0.375rem 0.875rem;
    transition: all 0.3s ease;
}

.timerBox.timerWarn {
    background: rgba(245, 158, 11, 0.1);
    border-color: #f59e0b;
    animation: timerPulse 1.5s ease-in-out infinite;
}

.timerBox.timerDanger {
    background: rgba(239, 68, 68, 0.12);
    border-color: #ef4444;
    animation: timerPulse 0.8s ease-in-out infinite;
}

@keyframes timerPulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.7;
    }
}

.timerIcon {
    font-size: 0.875rem;
}

.timerValue {
    font-size: 1.1rem;
    font-weight: 800;
    font-variant-numeric: tabular-nums;
    color: var(--accent);
    letter-spacing: 0.02em;
}

.timerBox.timerWarn .timerValue {
    color: #f59e0b;
}

.timerBox.timerDanger .timerValue {
    color: #ef4444;
}

.timerLabel {
    font-size: 0.65rem;
    color: var(--text-2);
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

/* Submit button in topbar */
.submitBtn {
    display: none;
    align-items: center;
    gap: 0.375rem;
    background: #ef4444;
    color: #fff;
    font-weight: 700;
    font-size: 0.8125rem;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s;
}

.submitBtn:hover {
    background: #dc2626;
    transform: translateY(-1px);
}

@media (min-width: 1024px) {
    .submitBtn {
        display: inline-flex;
    }
}

/* Mobile sidebar toggle */
.sidebarToggle {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    background: var(--accent-soft);
    color: var(--accent);
    font-size: 0.8125rem;
    font-weight: 600;
    padding: 0.5rem 0.875rem;
    border: 1.5px solid var(--accent);
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.2s;
}

.sidebarToggle:hover {
    background: rgba(21, 101, 192, 0.14);
}

@media (min-width: 1024px) {
    .sidebarToggle {
        display: none;
    }
}

/* ─── Body ─── */
.body {
    display: flex;
    flex: 1;
    overflow: hidden;
    position: relative;
}

/* ─── Left: Question Panel ─── */
.questionPanel {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    padding: 1.25rem 1.5rem;
    gap: 0;
}

@media (min-width: 1024px) {
    .questionPanel {
        padding: 1.5rem 2rem;
        width: 75%;
        flex: none;
    }
}

/* Question header */
.qHeader {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 1rem;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.qMeta {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.qNum {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text-1);
}

.qOf {
    font-weight: 400;
    color: var(--text-2);
}

.marks {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.markGood {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.2rem 0.5rem;
    background: rgba(34, 197, 94, 0.12);
    color: #22c55e;
    border-radius: 999px;
}

.markBad {
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.2rem 0.5rem;
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border-radius: 999px;
}

/* Per-question timer */
.qTimer {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--text-2);
    background: var(--bg-subtle);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.375rem 0.75rem;
    transition: all 0.3s;
}

.qTimer.qTimerWarn {
    color: #f59e0b;
    border-color: #f59e0b;
    background: rgba(245, 158, 11, 0.08);
    animation: timerPulse 1s ease-in-out infinite;
}

.qTimerWarning {
    font-size: 0.7rem;
    font-weight: 600;
    color: #f59e0b;
    margin-left: 0.25rem;
}

/* Question body */
.qBody {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

.qText {
    font-size: 1.05rem;
    font-weight: 500;
    line-height: 1.8;
    color: var(--text-1);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.25rem 1.5rem;
    box-shadow: var(--shadow-sm);
    animation: fadeUp 0.3s ease-out both;
}

/* Options */
.options {
    display: flex;
    flex-direction: column;
    gap: 0.625rem;
}

.option {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.9rem 1.25rem;
    border: 1.5px solid var(--border);
    border-radius: 14px;
    background: var(--surface);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    box-shadow: var(--shadow-sm);
}

.option:hover {
    border-color: var(--accent);
    background: var(--accent-soft);
    transform: translateX(4px);
    box-shadow: var(--shadow-md);
}

.option.optionSelected {
    border-color: var(--accent);
    background: var(--accent-soft);
    box-shadow: 0 0 0 3px rgba(21, 101, 192, 0.15);
}

.option.optionSaved {
    border-color: #22c55e;
    background: rgba(34, 197, 94, 0.07);
}

.option.optionDraft {
    border-color: #f59e0b;
    background: rgba(245, 158, 11, 0.07);
}

.radioInput {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
}

.optionKey {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid var(--border);
    background: var(--bg);
    font-size: 0.8125rem;
    font-weight: 700;
    color: var(--text-2);
    flex-shrink: 0;
    transition: all 0.2s;
}

.optionSelected .optionKey,
.option:hover .optionKey {
    border-color: var(--accent);
    background: var(--accent);
    color: #fff;
}

.optionSaved .optionKey {
    border-color: #22c55e;
    background: #22c55e;
    color: #fff;
}

.optionDraft .optionKey {
    border-color: #f59e0b;
    background: #f59e0b;
    color: #fff;
}

.optionVal {
    font-size: 0.9375rem;
    color: var(--text-1);
    flex: 1;
    line-height: 1.5;
}

.savedTag {
    font-size: 0.7rem;
    font-weight: 700;
    color: #22c55e;
    background: rgba(34, 197, 94, 0.12);
    padding: 0.15rem 0.5rem;
    border-radius: 999px;
    flex-shrink: 0;
}

.draftTag {
    font-size: 0.7rem;
    font-weight: 700;
    color: #f59e0b;
    background: rgba(245, 158, 11, 0.12);
    padding: 0.15rem 0.5rem;
    border-radius: 999px;
    flex-shrink: 0;
}

/* ─── Actions ─── */
.actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.625rem;
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border);
    justify-content: space-between;
}

.actionsLeft,
.actionsRight {
    display: flex;
    gap: 0.625rem;
    flex-wrap: wrap;
}

.btnClear {
    padding: 0.625rem 1.125rem;
    border: 1.5px solid var(--border);
    background: transparent;
    color: var(--text-2);
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    min-height: 44px;
}

.btnClear:hover:not(:disabled) {
    border-color: #ef4444;
    color: #ef4444;
    background: rgba(239, 68, 68, 0.06);
}

.btnClear:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.btnSkip {
    padding: 0.625rem 1.125rem;
    border: 1.5px solid var(--border);
    background: transparent;
    color: var(--text-2);
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    min-height: 44px;
}

.btnSkip:hover {
    border-color: #9ca3af;
    color: var(--text-1);
    background: var(--bg-subtle);
    transform: translateX(2px);
}

.btnDraft {
    padding: 0.625rem 1.25rem;
    border: 1.5px solid #f59e0b;
    background: rgba(245, 158, 11, 0.08);
    color: #f59e0b;
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    min-height: 44px;
}

.btnDraft:hover {
    background: rgba(245, 158, 11, 0.16);
    transform: translateY(-1px);
}

.btnSave {
    padding: 0.625rem 1.5rem;
    border: none;
    background: var(--accent);
    color: #fff;
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    min-height: 44px;
    box-shadow: 0 2px 8px rgba(21, 101, 192, 0.3);
}

.btnSave:hover:not(:disabled) {
    background: var(--accent-hover);
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(21, 101, 192, 0.4);
}

.btnSave:disabled {
    opacity: 0.45;
    cursor: not-allowed;
    box-shadow: none;
}

/* ─── Nav Row ─── */
.navRow {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: 1rem;
}

.navBtn {
    padding: 0.5rem 1rem;
    border: 1.5px solid var(--border);
    background: transparent;
    color: var(--text-2);
    border-radius: 10px;
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    min-height: 40px;
}

.navBtn:hover:not(:disabled) {
    border-color: var(--accent);
    color: var(--accent);
    background: var(--accent-soft);
}

.navBtn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.progressBar {
    flex: 1;
    height: 5px;
    background: var(--border);
    border-radius: 999px;
    overflow: hidden;
}

.progressFill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), #60a5fa);
    border-radius: 999px;
    transition: width 0.4s ease;
}

/* ─── Sidebar ─── */
.sidebar {
    width: 25%;
    flex-shrink: 0;
    border-left: 1px solid var(--border);
    background: var(--surface);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* On mobile: sidebar is a slide-over */
@media (max-width: 1023px) {
    .sidebar {
        position: fixed;
        top: 0;
        right: 0;
        width: min(340px, 90vw);
        height: 100dvh;
        z-index: 200;
        transform: translateX(100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--shadow-lg);
        border-left: none;
    }

    .sidebar.sidebarOpen {
        transform: translateX(0);
    }
}

.sidebarClose {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.75rem 1rem;
    border: none;
    background: transparent;
    color: var(--text-2);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    border-bottom: 1px solid var(--border);
    transition: color 0.2s;
}

.sidebarClose:hover {
    color: var(--text-1);
}

@media (min-width: 1024px) {
    .sidebarClose {
        display: none;
    }
}

.sidebarInner {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.sidebarSection {}

.sidebarTitle {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--text-2);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 0.625rem;
}

/* Palette grid */
.palette {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(36px, 1fr));
    gap: 0.4rem;
}

.palBtn {
    aspect-ratio: 1;
    border-radius: 8px;
    border: 1.5px solid var(--border);
    background: var(--bg);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-2);
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.palBtn:hover {
    transform: scale(1.1);
}

.palBtn.palBtnCurrent {
    outline: 2.5px solid var(--accent);
    outline-offset: 2px;
    transform: scale(1.1);
}

/* Status colors */
.palBtn_answered {
    background: #22c55e;
    border-color: #22c55e;
    color: #fff;
}

.palBtn_draft {
    background: #f59e0b;
    border-color: #f59e0b;
    color: #fff;
}

.palBtn_empty_next {
    background: #9ca3af;
    border-color: #9ca3af;
    color: #fff;
}

.palBtn_not_visited {
    background: var(--bg);
    border-color: var(--border);
    color: var(--text-2);
}

/* Legend */
.legend {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    padding: 0.75rem;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 12px;
}

.legendRow {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.78rem;
    color: var(--text-2);
}

.dot {
    width: 12px;
    height: 12px;
    border-radius: 4px;
    flex-shrink: 0;
}

.dot_answered {
    background: #22c55e;
}

.dot_draft {
    background: #f59e0b;
}

.dot_empty_next {
    background: #9ca3af;
}

.dot_not_visited {
    background: var(--border);
}

/* Summary stats */
.statsSummary {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
}

.summStat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.125rem;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 0.625rem 0.25rem;
}

.summNum {
    font-size: 1.125rem;
    font-weight: 800;
}

.summLabel {
    font-size: 0.65rem;
    color: var(--text-2);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    text-align: center;
}

/* Marking scheme */
.scheme {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 0.75rem;
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
}

.schemeTitle {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-2);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.25rem;
}

.schemeRow {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    color: var(--text-2);
}

.schemePlus {
    font-weight: 800;
    color: #22c55e;
    min-width: 20px;
}

.schemeMinus {
    font-weight: 800;
    color: #ef4444;
    min-width: 20px;
}

.schemeZero {
    font-weight: 800;
    color: #9ca3af;
    min-width: 20px;
}

/* Full submit button in sidebar */
.submitBtnFull {
    width: 100%;
    padding: 0.875rem;
    background: #ef4444;
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 0.9375rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
    min-height: 48px;
}

.submitBtnFull:hover {
    background: #dc2626;
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(239, 68, 68, 0.4);
}

/* Mobile backdrop */
.backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 199;
}

@media (min-width: 1024px) {
    .backdrop {
        display: none;
    }
}

/* ─── Modal Overlay ─── */
.modalOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(6px);
    z-index: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    animation: fadeIn 0.2s ease-out;
}

.modal {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 2rem;
    width: 100%;
    max-width: 560px;
    max-height: 90dvh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
    animation: scaleIn 0.25s ease-out;
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
}

/* Results modal */
.modalHeader {
    text-align: center;
}

.modalIcon {
    font-size: 2.5rem;
    display: block;
    margin-bottom: 0.5rem;
}

.modalTitle {
    font-size: 1.375rem;
    font-weight: 800;
    color: var(--text-1);
}

.modalSub {
    font-size: 0.8125rem;
    color: var(--text-2);
    margin-top: 0.25rem;
}

/* Score ring */
.scoreRing {
    display: flex;
    align-items: center;
    justify-content: center;
}

.scoreRingInner {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    background: conic-gradient(var(--accent) 0%, var(--border) 0%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border: 8px solid var(--accent);
    box-shadow: 0 0 0 4px var(--accent-soft), var(--shadow-md);
    gap: 0.125rem;
}

.scoreBig {
    font-size: 2rem;
    font-weight: 900;
    color: var(--accent);
    line-height: 1;
}

.scoreMax {
    font-size: 0.75rem;
    color: var(--text-2);
}

.scorePct {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--text-1);
}

/* Stats grid */
.statsGrid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
}

.statCard {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.125rem;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 0.75rem 0.25rem;
}

.statNum {
    font-size: 1.25rem;
    font-weight: 800;
}

.statLabel {
    font-size: 0.65rem;
    color: var(--text-2);
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

.statPts {
    font-size: 0.65rem;
    color: var(--text-3);
}

.markingInfo {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
    font-size: 0.8rem;
    color: var(--text-2);
    padding: 0.625rem 1rem;
    background: var(--bg);
    border-radius: 10px;
    border: 1px solid var(--border);
}

/* Breakdown */
.breakdown {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.breakdownTitle {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--text-2);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.breakdownList {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    max-height: 200px;
    overflow-y: auto;
}

.bRow {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    font-size: 0.8125rem;
    padding: 0.4rem 0.75rem;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
}

.bNum {
    font-weight: 700;
    color: var(--text-2);
    min-width: 28px;
}

.bIcon {
    font-size: 0.875rem;
}

.bStatus {
    color: var(--text-2);
    flex: 1;
}

/* Modal actions */
.modalActions {
    display: flex;
    gap: 0.75rem;
}

.btnReview {
    flex: 1;
    padding: 0.75rem;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 0.9375rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
}

.btnReview:hover {
    background: var(--accent-hover);
    transform: translateY(-1px);
}

.btnClose {
    flex: 1;
    padding: 0.75rem;
    background: transparent;
    color: var(--text-2);
    border: 1.5px solid var(--border);
    border-radius: 12px;
    font-size: 0.9375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.btnClose:hover {
    border-color: var(--text-1);
    color: var(--text-1);
}

/* ─── Review Modal ─── */
.reviewModal {
    max-width: 680px;
}

.reviewHeader {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.closeBtn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 1.5px solid var(--border);
    background: transparent;
    color: var(--text-2);
    cursor: pointer;
    font-size: 0.875rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.closeBtn:hover {
    border-color: #ef4444;
    color: #ef4444;
}

/* Review nav dots */
.reviewNav {
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
}

.reviewDot {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: 1.5px solid var(--border);
    background: var(--bg);
    font-size: 0.7rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.15s;
    color: var(--text-2);
    display: flex;
    align-items: center;
    justify-content: center;
}

.reviewDotActive {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    transform: scale(1.1);
}

.reviewDotCorrect {
    background: #22c55e;
    border-color: #22c55e;
    color: #fff;
}

.reviewDotWrong {
    background: #ef4444;
    border-color: #ef4444;
    color: #fff;
}

.reviewDotSkipped {
    background: #9ca3af;
    border-color: #9ca3af;
    color: #fff;
}

/* Review body */
.reviewBody {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.reviewQNum {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-2);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.reviewQ {
    font-size: 1rem;
    font-weight: 500;
    line-height: 1.7;
    color: var(--text-1);
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1rem 1.25rem;
}

.reviewOpts {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.reviewOpt {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    background: var(--bg);
    font-size: 0.875rem;
    color: var(--text-2);
}

.reviewOptCorrect {
    border-color: #22c55e;
    background: rgba(34, 197, 94, 0.08);
    color: var(--text-1);
}

.reviewOptWrong {
    border-color: #ef4444;
    background: rgba(239, 68, 68, 0.08);
    color: var(--text-1);
}

.reviewOptKey {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.75rem;
    flex-shrink: 0;
}

.reviewOptCorrect .reviewOptKey {
    background: #22c55e;
    color: #fff;
}

.reviewOptWrong .reviewOptKey {
    background: #ef4444;
    color: #fff;
}

.reviewOptTag {
    margin-left: auto;
    font-size: 0.7rem;
    font-weight: 700;
    color: #22c55e;
    background: rgba(34, 197, 94, 0.12);
    padding: 0.15rem 0.5rem;
    border-radius: 999px;
    flex-shrink: 0;
}

.reviewOptTagWrong {
    margin-left: auto;
    font-size: 0.7rem;
    font-weight: 700;
    color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
    padding: 0.15rem 0.5rem;
    border-radius: 999px;
    flex-shrink: 0;
}

/* Explanation */
.explanation {
    background: var(--bg-subtle);
    border: 1px solid var(--border);
    border-left: 3px solid var(--accent);
    border-radius: 10px;
    padding: 0.875rem 1rem;
}

.expLabel {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.5rem;
}

.expText {
    font-size: 0.875rem;
    color: var(--text-2);
    line-height: 1.7;
}

/* Review footer */
.reviewFooter {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    padding-top: 0.5rem;
    border-top: 1px solid var(--border);
}

.reviewCount {
    font-size: 0.8125rem;
    color: var(--text-2);
    font-weight: 600;
}

/* Buttons (general) */
.btnPrimary {
    padding: 0.625rem 1.25rem;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    min-height: 44px;
}

.btnPrimary:hover:not(:disabled) {
    background: var(--accent-hover);
    transform: translateY(-1px);
}

.btnPrimary:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.btnSecondary {
    padding: 0.625rem 1.25rem;
    background: transparent;
    color: var(--text-2);
    border: 1.5px solid var(--border);
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    min-height: 44px;
}

.btnSecondary:hover:not(:disabled) {
    border-color: var(--text-2);
    color: var(--text-1);
}

.btnSecondary:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

/* ─── Confirm Modal ─── */
.confirmModal {
    max-width: 400px;
    text-align: center;
    align-items: center;
}

.confirmIcon {
    font-size: 2.5rem;
}

.confirmTitle {
    font-size: 1.25rem;
    font-weight: 800;
    color: var(--text-1);
}

.confirmSub {
    font-size: 0.875rem;
    color: var(--text-2);
    line-height: 1.6;
}

.confirmStats {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    width: 100%;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 0.875rem;
}

.cStat {
    display: flex;
    align-items: center;
    gap: 0.625rem;
    font-size: 0.875rem;
    color: var(--text-2);
}

.confirmActions {
    display: flex;
    gap: 0.75rem;
    width: 100%;
}

.btnDanger {
    flex: 1;
    padding: 0.75rem;
    background: #ef4444;
    color: #fff;
    border: none;
    border-radius: 12px;
    font-size: 0.9375rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
}

.btnDanger:hover {
    background: #dc2626;
    transform: translateY(-1px);
}

/* ─── Time's Up ─── */
.timesUpOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
    z-index: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease-out;
}

.timesUpCard {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 2.5rem;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    max-width: 360px;
    animation: scaleIn 0.3s ease-out;
}

.timesUpIcon {
    font-size: 4rem;
    animation: timerPulse 0.6s ease-in-out infinite;
}

.timesUpCard h2 {
    font-size: 1.5rem;
    font-weight: 900;
    color: #ef4444;
}

.timesUpCard p {
    font-size: 0.9375rem;
    color: var(--text-2);
    line-height: 1.6;
}

/* ─── Animations ─── */
@keyframes fadeUp {
    from {
        opacity: 0;
        transform: translateY(12px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.94);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}/* --- SECTION TABS --- */
.sectionTabs {
    display: flex;
    overflow-x: auto;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    padding: 0 1rem;
    gap: 0.5rem;
    scrollbar-width: none; /* Firefox */
}
.sectionTabs::-webkit-scrollbar {
    display: none; /* Safari and Chrome */
}

.sectionTab {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.875rem 1rem;
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    white-space: nowrap;
    opacity: 0.6;
    transition: all 0.2s ease;
}

.sectionTab:hover {
    opacity: 1;
    background: var(--bg-subtle);
}

.sectionTabActive {
    opacity: 1;
    border-bottom-color: var(--accent);
    background: var(--bg);
}

.tabIcon {
    font-size: 1.25rem;
}

.tabContent {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}

.tabName {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-1);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.tabSubject {
    font-size: 0.65rem;
    color: var(--text-2);
}

.tabProgress {
    font-size: 0.7rem;
    font-weight: 700;
    background: var(--bg-subtle);
    padding: 0.15rem 0.4rem;
    border-radius: 999px;
    margin-left: 0.5rem;
    color: var(--text-2);
    border: 1px solid var(--border);
}

.sectionTabActive .tabProgress {
    background: var(--accent-soft);
    color: var(--accent);
    border-color: var(--accent);
}

/* Section Breakdown in Results */
.sectionBreakList {
    display: flex;
    flex-direction: column;
    gap: 0.625rem;
}

.sectionBreakCard {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.875rem 1rem;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 12px;
}

.sbHeader {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.sbIcon {
    font-size: 1.25rem;
}

.sbName {
    font-size: 0.875rem;
    font-weight: 700;
}

.sbSubject {
    font-size: 0.75rem;
    color: var(--text-2);
}

.sbStats {
    display: flex;
    gap: 1rem;
    font-size: 0.875rem;
    font-weight: 600;
}

/* Sidebar section switcher */
.sidebarSecBtn {
    width: 100%;
    text-align: left;
    padding: 0.5rem 0.75rem;
    border-radius: 8px;
    border: 1px solid transparent;
    background: transparent;
    cursor: pointer;
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--text-2);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.sidebarSecBtn:hover {
    background: var(--bg-subtle);
    color: var(--text-1);
}
.sidebarSecBtnActive {
    background: var(--accent-soft);
    color: var(--accent);
    border-color: var(--accent);
}
.sidebarSectionSwitcher {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

.qNumBlock {
    display: flex;
    flex-direction: column;
}
.qGlobalNum {
    font-size: 0.7rem;
    color: var(--text-3);
}
